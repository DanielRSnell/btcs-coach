import{u as w,r as n,j as e,H as y}from"./app-3FspBjTR.js";import{A as j,M as o}from"./app-layout-CjrmdGQI.js";import{C as x,a as b,b as N,d as _,c as u,B as S}from"./badge-vIQQGWNV.js";import{a as C}from"./app-logo-icon-BLQzeAhD.js";import{C as k}from"./clock-DwJkVMOQ.js";/* empty css            */import"./index-F970KQGr.js";import"./index-CJYJTZPg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],V=C("Calendar",E);function H({user:s,sessions:c}){const{props:O}=w(),[g,v]=n.useState(null);n.useEffect(()=>{if(!document.querySelector('script[src*="widget.bundle.mjs"]')){const t=document.createElement("script");t.src="https://cdn.voiceflow.com/widget/bundle.mjs",t.async=!0,t.type="module",t.crossOrigin="anonymous",document.head.appendChild(t)}},[]),n.useEffect(()=>{(()=>{setTimeout(()=>{console.log("Starting Voiceflow initialization...");const a=document.getElementById("main-voiceflow-chat");console.log("Chat element found:",a),function(m,h){const l=m.createElement(h),f=m.getElementsByTagName(h)[0];l.onload=function(){if(console.log("Voiceflow script loaded, window.voiceflow:",window.voiceflow),window.voiceflow&&window.voiceflow.chat){const i=document.getElementById("main-voiceflow-chat");console.log("Target element for Voiceflow:",i);const p={id:s?.id||0,name:s?.name||"Anonymous",email:s?.email||"",role:s?.role||"member",pi_behavioral_pattern_id:s?.pi_behavioral_pattern_id||null,pi_behavioral_pattern:s?.pi_behavioral_pattern||null,pi_raw_scores:s?.pi_raw_scores||null,pi_assessed_at:s?.pi_assessed_at||null,pi_notes:s?.pi_notes||null,pi_profile:s?.pi_profile||null,has_pi_assessment:s?.has_pi_assessment||!1,has_pi_profile:s?.has_pi_profile||!1};console.log("ðŸš€ Voiceflow User Payload:",JSON.stringify(p,null,2)),window.voiceflow.chat.load({verify:{projectID:"686331bc96acfa1dd62f6fd5"},url:"https://general-runtime.voiceflow.com",versionID:"production",voice:{url:"https://runtime-api.voiceflow.com"},render:{mode:"embedded",target:i},assistant:{stylesheet:"/voiceflow.css?v="+new Date().toISOString().replace(/[:.]/g,"-")},autostart:!0,launch:{event:{type:"launch",payload:p}}}),console.log("Voiceflow chat loaded")}else{console.error("Voiceflow widget failed to load - missing window.voiceflow");const i=document.getElementById("main-voiceflow-chat");i&&(i.innerHTML=`
                                    <div class="flex items-center justify-center h-96 bg-gray-50 rounded-lg">
                                        <div class="text-center">
                                            <div class="text-gray-500 mb-2">Chat widget failed to load</div>
                                            <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                                                Retry
                                            </button>
                                        </div>
                                    </div>
                                `)}},l.src="https://cdn.voiceflow.com/widget/bundle.mjs",l.type="module",l.crossOrigin="anonymous",f.parentNode?.insertBefore(l,f)}(document,"script")},100)})()},[s]);const r=t=>{try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return"Unknown"}},d=t=>t.last_turn?.status||"Unknown";return e.jsxs(j,{children:[e.jsx(y,{title:"Sessions"}),e.jsxs("div",{className:"flex h-[calc(100vh-8rem)] gap-6 py-6",children:[e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsxs(x,{className:"h-full",children:[e.jsxs(b,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),"Your Sessions"]}),e.jsxs(_,{children:[Object.keys(c).length," active session",Object.keys(c).length!==1?"s":""]})]}),e.jsx(u,{className:"p-0",children:e.jsx("div",{className:"h-full overflow-y-auto",children:Object.keys(c).length===0?e.jsx("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-6 bg-gray-50 rounded-full",children:e.jsx(o,{className:"h-16 w-16 text-gray-300"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No active sessions yet"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Start a conversation in the chat area to begin your coaching journey and create your first session."})]}),e.jsx("div",{className:"flex items-center space-x-2 text-xs text-gray-400 mt-6",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{children:"Ready to chat"})]})})]})}):e.jsx("div",{className:"p-4 space-y-3",children:Object.entries(c).map(([t,a])=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${g===t?"bg-blue-50 border-blue-200":"bg-white hover:bg-gray-50"}`,onClick:()=>v(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"font-medium text-sm truncate flex-1",children:[t.substring(0,12),"..."]}),e.jsx(S,{variant:d(a)==="ACTIVE"?"default":"secondary",className:"ml-2 text-xs",children:d(a)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(V,{className:"h-3 w-3"}),e.jsx("span",{children:r(a.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[e.jsx(k,{className:"h-3 w-3"}),e.jsxs("span",{children:["Updated ",r(a.updated_at)]})]})]},t))})})})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(x,{className:"h-full py-0",children:e.jsx(u,{className:"p-0 h-full",children:e.jsx("div",{id:"main-voiceflow-chat",className:"h-full w-full rounded-lg overflow-hidden",children:e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(o,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"Loading chat interface..."})]})})})})})})]})]})}export{H as default};
