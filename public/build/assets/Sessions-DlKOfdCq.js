import{u as v,r as n,j as e,H as y}from"./app-Cyx-MbUw.js";import{A as j,M as c}from"./app-layout-BaDwedXZ.js";import{C as u,a as b,b as _,d as N,c as x,B as S}from"./badge-C5Aqpbyx.js";import{a as C}from"./app-logo-icon-dmhZk9XZ.js";import{C as k}from"./clock-BETJmf9L.js";/* empty css            */import"./index-PuRBAvhW.js";import"./index-CnswGRAg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],V=C("Calendar",E);function H({user:s,sessions:l}){const{props:O}=v(),[g,w]=n.useState(null);n.useEffect(()=>{if(!document.querySelector('script[src*="widget.bundle.mjs"]')){const t=document.createElement("script");t.src="https://cdn.voiceflow.com/widget/bundle.mjs",t.async=!0,t.type="module",t.crossOrigin="anonymous",document.head.appendChild(t)}},[]),n.useEffect(()=>{(()=>{setTimeout(()=>{console.log("Starting Voiceflow initialization...");const a=document.getElementById("main-voiceflow-chat");console.log("Chat element found:",a),function(m,h){const o=m.createElement(h),p=m.getElementsByTagName(h)[0];o.onload=function(){if(console.log("Voiceflow script loaded, window.voiceflow:",window.voiceflow),window.voiceflow&&window.voiceflow.chat){const i=document.getElementById("main-voiceflow-chat");console.log("Target element for Voiceflow:",i);const f={id:s?.id||0,name:s?.name||"Anonymous",email:s?.email||"",role:s?.role||"member",pi_behavioral_pattern_id:s?.pi_behavioral_pattern_id||null,pi_behavioral_pattern:s?.pi_behavioral_pattern||null,pi_raw_scores:s?.pi_raw_scores||null,pi_assessed_at:s?.pi_assessed_at||null,pi_notes:s?.pi_notes||null,pi_profile:s?.pi_profile||null,has_pi_assessment:s?.has_pi_assessment||!1,has_pi_profile:s?.has_pi_profile||!1};console.log("ðŸš€ Voiceflow User Payload:",JSON.stringify(f,null,2)),window.voiceflow.chat.load({verify:{projectID:"686331bc96acfa1dd62f6fd5"},url:"https://general-runtime.voiceflow.com",versionID:"production",voice:{url:"https://runtime-api.voiceflow.com"},render:{mode:"embedded",target:i},assistant:{stylesheet:"/voiceflow.css?v="+new Date().toISOString().replace(/[:.]/g,"-")},autostart:!0,launch:{event:{type:"launch",payload:f}}}),console.log("Voiceflow chat loaded")}else{console.error("Voiceflow widget failed to load - missing window.voiceflow");const i=document.getElementById("main-voiceflow-chat");i&&(i.innerHTML=`
                                    <div class="flex items-center justify-center h-96 bg-gray-50 rounded-lg">
                                        <div class="text-center">
                                            <div class="text-gray-500 mb-2">Chat widget failed to load</div>
                                            <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                                                Retry
                                            </button>
                                        </div>
                                    </div>
                                `)}},o.src="https://cdn.voiceflow.com/widget/bundle.mjs",o.type="module",o.crossOrigin="anonymous",p.parentNode?.insertBefore(o,p)}(document,"script")},100)})()},[s]);const r=t=>{try{return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return"Unknown"}},d=t=>t.last_turn?.status||"Unknown";return e.jsxs(j,{children:[e.jsx(y,{title:"Sessions"}),e.jsxs("div",{className:"flex h-[calc(100vh-8rem)] gap-6",children:[e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsxs(u,{className:"h-full",children:[e.jsxs(b,{children:[e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(c,{className:"h-5 w-5"}),"Your Sessions"]}),e.jsxs(N,{children:[Object.keys(l).length," active session",Object.keys(l).length!==1?"s":""]})]}),e.jsx(x,{className:"p-0",children:e.jsx("div",{className:"h-[calc(100%-120px)] overflow-y-auto",children:Object.keys(l).length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No active sessions yet."}),e.jsx("p",{className:"text-sm mt-1",children:"Start a conversation to create your first session!"})]}):e.jsx("div",{className:"p-4 space-y-3",children:Object.entries(l).map(([t,a])=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${g===t?"bg-blue-50 border-blue-200":"bg-white hover:bg-gray-50"}`,onClick:()=>w(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"font-medium text-sm truncate flex-1",children:[t.substring(0,12),"..."]}),e.jsx(S,{variant:d(a)==="ACTIVE"?"default":"secondary",className:"ml-2 text-xs",children:d(a)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(V,{className:"h-3 w-3"}),e.jsx("span",{children:r(a.created_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[e.jsx(k,{className:"h-3 w-3"}),e.jsxs("span",{children:["Updated ",r(a.updated_at)]})]})]},t))})})})]})}),e.jsx("div",{className:"flex-1",children:e.jsx(u,{className:"h-full",children:e.jsx(x,{className:"p-0 h-full",children:e.jsx("div",{id:"main-voiceflow-chat",className:"h-full w-full rounded-lg overflow-hidden",children:e.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500",children:"Loading chat interface..."})]})})})})})})]})]})}export{H as default};
